# ğŸš€ WhatsApp SaaS Gateway System

Ù†Ø¸Ø§Ù… SaaS Ù…ØªØ·ÙˆØ± Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¬Ù„Ø³Ø§Øª ÙˆØ­Ø³Ø§Ø¨Ø§Øª WhatsApp Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŒ Ù‚Ø§Ø¦Ù… Ø¹Ù„Ù‰ microservicesØŒ Ù…Ø¹ Gateway Ù…Ø±ÙƒØ²ÙŠ ÙˆØ­Ø§ÙˆÙŠØ§Øª Ù…Ø³ØªÙ‚Ù„Ø© Ù„ÙƒÙ„ Ø¬Ù„Ø³Ø© Ù…Ø³ØªØ®Ø¯Ù….

## ğŸ“‹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

- [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
- [Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©](#Ø§Ù„Ø¨Ù†ÙŠØ©-Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©)
- [Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª](#Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª)
- [Ø§Ù„ØªØ«Ø¨ÙŠØª ÙˆØ§Ù„ØªØ´ØºÙŠÙ„](#Ø§Ù„ØªØ«Ø¨ÙŠØª-ÙˆØ§Ù„ØªØ´ØºÙŠÙ„)
- [API Documentation](#api-documentation)
- [Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…](#Ø£Ù…Ø«Ù„Ø©-Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…)
- [Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©](#Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª-Ø§Ù„Ø¨ÙŠØ¦Ø©)
- [Ø§Ù„Ù†Ø´Ø±](#Ø§Ù„Ù†Ø´Ø±)

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

### Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

âœ… **Ù†Ø¸Ø§Ù… SaaS Ù…ØªÙƒØ§Ù…Ù„** - Ø¥Ø¯Ø§Ø±Ø© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø¹ Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ÙˆØµÙ„Ø§Ø­ÙŠØ§Øª  
âœ… **Microservices Architecture** - Ù‡ÙŠÙƒÙ„ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙˆØ³Ø¹ ÙˆÙ…Ø¹Ø²ÙˆÙ„  
âœ… **Docker Containerization** - Ø­Ø§ÙˆÙŠØ§Øª Ù…Ø³ØªÙ‚Ù„Ø© Ù„ÙƒÙ„ Ø¬Ù„Ø³Ø© WhatsApp  
âœ… **Gateway API Ù…Ø±ÙƒØ²ÙŠ** - Ù†Ù‚Ø·Ø© Ø¯Ø®ÙˆÙ„ ÙˆØ§Ø­Ø¯Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª  
âœ… **Session Management** - Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„Ø¬Ù„Ø³Ø§Øª ÙˆØ§Ù„Ù…ØµØ§Ø¯Ù‚Ø©  
âœ… **Load Balancing** - ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø­Ù…Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹  
âœ… **Real-time Monitoring** - Ù…Ø±Ø§Ù‚Ø¨Ø© ØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª  
âœ… **Webhooks Support** - Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙˆØ±ÙŠØ© Ù„Ù„Ø£Ø­Ø¯Ø§Ø«  
âœ… **API Keys** - Ù…ØµØ§Ø¯Ù‚Ø© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø·Ø±Ù‚  
âœ… **Analytics & Billing** - ØªØªØ¨Ø¹ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„ÙÙˆØªØ±Ø©  

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸŒ Client Applications                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ğŸ“¡ Gateway API (Port 3000)                   â”‚
â”‚  â€¢ Authentication & Authorization                           â”‚
â”‚  â€¢ Request Routing & Load Balancing                         â”‚
â”‚  â€¢ Subscription Management                                  â”‚
â”‚  â€¢ Docker Container Orchestration                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚ğŸ” Session    â”‚ â”‚ğŸ“Š Redis â”‚ â”‚ğŸ’¾ PostgreSQL â”‚
â”‚Auth Service  â”‚ â”‚ Cache   â”‚ â”‚  Database    â”‚
â”‚(Port 3001)   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ğŸ“¦ WhatsApp Instance Containers                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚Instance 1â”‚ â”‚Instance 2â”‚ â”‚Instance 3â”‚ â”‚Instance Nâ”‚      â”‚
â”‚  â”‚Port 4000 â”‚ â”‚Port 4001 â”‚ â”‚Port 4002 â”‚ â”‚Port 400N â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—„ï¸ Storage     â”‚
â”‚ (Sessions)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

| Ø§Ù„Ù…ÙƒÙˆÙ† | Ø§Ù„ÙˆØµÙ | Ø§Ù„Ø¨ÙˆØ±Øª |
|--------|--------|---------|
| **Gateway API** | Ù†Ù‚Ø·Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ù†Ø¸Ø§Ù… | 3000 |
| **Session Auth Service** | Ø®Ø¯Ù…Ø© Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª ÙˆQR Codes | 3001 |
| **PostgreSQL** | Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© | 5432 |
| **Redis** | Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª | 6379 |
| **WhatsApp Instances** | Ø­Ø§ÙˆÙŠØ§Øª WhatsApp Ù…Ø³ØªÙ‚Ù„Ø© | 4000-4999 |

## ğŸ“‹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª

### Ø§Ù„Ù†Ø¸Ø§Ù…

- **Node.js** >= 18.0.0
- **Docker** >= 20.0.0
- **Docker Compose** >= 2.0.0
- **PostgreSQL** >= 12
- **Redis** >= 6

### Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

- **RAM**: 4GB Ø­Ø¯ Ø£Ø¯Ù†Ù‰ØŒ 8GB Ù…ÙÙˆØµÙ‰ Ø¨Ù‡
- **CPU**: 2 cores Ø­Ø¯ Ø£Ø¯Ù†Ù‰ØŒ 4 cores Ù…ÙÙˆØµÙ‰ Ø¨Ù‡
- **Storage**: 20GB Ø­Ø¯ Ø£Ø¯Ù†Ù‰ØŒ 100GB Ù„Ù„Ø¥Ù†ØªØ§Ø¬
- **Network**: 1Gbps Ù„Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø«Ù„Ù‰

## ğŸš€ Ø§Ù„ØªØ«Ø¨ÙŠØª ÙˆØ§Ù„ØªØ´ØºÙŠÙ„

### 1. Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹

```bash
git clone https://github.com/SamerElhamdo/whatsapp-api.git
cd whatsapp-api/gateway
```

### 2. Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©

```bash
cp .env.example .env
# Ø¹Ø¯Ù„ Ø§Ù„Ù…Ù„Ù Ø­Ø³Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ
nano .env
```

### 3. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù€ Docker

```bash
# Ø¨Ù†Ø§Ø¡ ÙˆØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
npm run build
npm start

# Ø£Ùˆ Ù„Ù„ØªØ·ÙˆÙŠØ±
npm run dev
```

### 4. ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```bash
# ØªØ´ØºÙŠÙ„ migrations
npm run db:migrate

# Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
npm run db:seed
```

### 5. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ´ØºÙŠÙ„

```bash
# ÙØ­Øµ ØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
curl http://localhost:3000/health

# Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©
curl http://localhost:3000/
```

## ğŸ“š API Documentation

### Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

#### ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯

```bash
POST /api/v1/auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123",
  "name": "John Doe",
  "phone": "+1234567890"
}
```

#### ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„

```bash
POST /api/v1/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
```

#### Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

```bash
GET /api/v1/auth/me
Authorization: Bearer YOUR_JWT_TOKEN
```

### Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª

#### Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø©

```bash
POST /api/v1/sessions
Authorization: Bearer YOUR_JWT_TOKEN
Content-Type: application/json

{
  "session_name": "my-whatsapp-session",
  "webhook_url": "https://your-webhook-url.com/webhook",
  "settings": {
    "auto_reply": false,
    "webhook_events": ["message", "status"]
  }
}
```

#### Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ù„Ø³Ø§Øª

```bash
GET /api/v1/sessions
Authorization: Bearer YOUR_JWT_TOKEN
```

#### Ø­Ø°Ù Ø¬Ù„Ø³Ø©

```bash
DELETE /api/v1/sessions/{session_id}
Authorization: Bearer YOUR_JWT_TOKEN
```

### Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª (Instances)

#### ØªØ´ØºÙŠÙ„ instance Ø¬Ø¯ÙŠØ¯Ø©

```bash
POST /api/v1/instances
Authorization: Bearer YOUR_JWT_TOKEN
Content-Type: application/json

{
  "session_id": "session-uuid-here"
}
```

#### Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª

```bash
GET /api/v1/instances
Authorization: Bearer YOUR_JWT_TOKEN
```

#### Ø¥ÙŠÙ‚Ø§Ù Ø­Ø§ÙˆÙŠØ©

```bash
POST /api/v1/instances/{instance_id}/stop
Authorization: Bearer YOUR_JWT_TOKEN
```

### Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„

#### Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ©

```bash
POST /api/v1/messages/send
Authorization: Bearer YOUR_JWT_TOKEN
Content-Type: application/json

{
  "session_id": "session-uuid-here",
  "recipient": "1234567890@c.us",
  "message": "Hello from WhatsApp SaaS!",
  "message_type": "text"
}
```

#### Ø¹Ø±Ø¶ Ø³Ø¬Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„

```bash
GET /api/v1/messages?page=1&limit=20
Authorization: Bearer YOUR_JWT_TOKEN
```

### Ø¥Ø¯Ø§Ø±Ø© Webhooks

#### Ø¥Ù†Ø´Ø§Ø¡ webhook

```bash
POST /api/v1/webhooks
Authorization: Bearer YOUR_JWT_TOKEN
Content-Type: application/json

{
  "url": "https://your-domain.com/webhook",
  "events": ["message", "status", "qr"],
  "session_id": "session-uuid-here"
}
```

### Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

#### Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

```bash
GET /api/v1/analytics/overview
Authorization: Bearer YOUR_JWT_TOKEN
```

## ğŸ’¡ Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Ù…Ø«Ø§Ù„ Ø´Ø§Ù…Ù„: Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©

```javascript
const axios = require('axios')

const API_BASE = 'http://localhost:3000/api/v1'
let authToken = ''

// 1. ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
async function login() {
  const response = await axios.post(`${API_BASE}/auth/login`, {
    email: 'demo@whatsapp-saas.com',
    password: 'demo123'
  })
  
  authToken = response.data.data.token
  console.log('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„')
}

// 2. Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø©
async function createSession() {
  const response = await axios.post(`${API_BASE}/sessions`, {
    session_name: 'my-business-whatsapp',
    webhook_url: 'https://my-domain.com/webhook'
  }, {
    headers: { Authorization: `Bearer ${authToken}` }
  })
  
  return response.data.data.session.id
}

// 3. ØªØ´ØºÙŠÙ„ instance
async function startInstance(sessionId) {
  const response = await axios.post(`${API_BASE}/instances`, {
    session_id: sessionId
  }, {
    headers: { Authorization: `Bearer ${authToken}` }
  })
  
  console.log('âœ… ØªÙ… ØªØ´ØºÙŠÙ„ Instance')
  return response.data.data.instance
}

// 4. Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
async function sendMessage(sessionId) {
  const response = await axios.post(`${API_BASE}/messages/send`, {
    session_id: sessionId,
    recipient: '1234567890@c.us',
    message: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ù…Ù† Ù†Ø¸Ø§Ù… WhatsApp SaaS!',
    message_type: 'text'
  }, {
    headers: { Authorization: `Bearer ${authToken}` }
  })
  
  console.log('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©')
  return response.data
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„
async function main() {
  try {
    await login()
    const sessionId = await createSession()
    await startInstance(sessionId)
    
    // Ø§Ù†ØªØ¸Ø§Ø± ØªØ´ØºÙŠÙ„ Instance
    setTimeout(async () => {
      await sendMessage(sessionId)
    }, 5000)
    
  } catch (error) {
    console.error('âŒ Ø®Ø·Ø£:', error.response?.data || error.message)
  }
}

main()
```

### Ù…Ø«Ø§Ù„ API Key Authentication

```bash
# Ø§Ø³ØªØ®Ø¯Ø§Ù… API Key Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† JWT
curl -X POST http://localhost:3000/api/v1/messages/send \
  -H "X-API-Key: wsa_your_api_key_here" \
  -H "Content-Type: application/json" \
  -d '{
    "session_id": "session-uuid",
    "recipient": "1234567890@c.us",
    "message": "Hello via API Key!"
  }'
```

## âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©

### Ù…Ù„Ù `.env` Ø§Ù„ÙƒØ§Ù…Ù„

```env
# Database Configuration
DB_HOST=postgres
DB_PORT=5432
DB_NAME=whatsapp_saas
DB_USER=postgres
DB_PASSWORD=postgres123

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis123

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d

# API Configuration
NODE_ENV=production
PORT=3000
API_VERSION=v1

# Docker Configuration
DOCKER_HOST=unix:///var/run/docker.sock
WHATSAPP_IMAGE=whatsapp-instance:latest

# Instance Configuration
INSTANCE_PORT_RANGE_START=4000
INSTANCE_PORT_RANGE_END=4999
MAX_INSTANCES_PER_USER=5

# Storage Configuration
SESSION_STORAGE_PATH=/app/storage/sessions
MEDIA_STORAGE_PATH=/app/storage/media

# Security Configuration
WEBHOOK_SECRET=your-webhook-secret-key
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Feature Flags
ENABLE_REGISTRATION=true
ENABLE_EMAIL_VERIFICATION=false
ENABLE_WEBHOOKS=true
ENABLE_API_KEYS=true
```

## ğŸ”’ Ø§Ù„Ø£Ù…Ø§Ù†

### Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª

1. **ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©**
2. **Ø§Ø³ØªØ®Ø¯Ø§Ù… HTTPS ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬**
3. **ØªÙØ¹ÙŠÙ„ Rate Limiting**
4. **Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…Ø´Ø¨ÙˆÙ‡Ø©**
5. **ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù… Ø¯ÙˆØ±ÙŠØ§Ù‹**

### Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†

```env
# ØªÙØ¹ÙŠÙ„ HTTPS
ENABLE_HTTPS=true
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/private.key

# ØªØ´Ø¯ÙŠØ¯ Ø§Ù„Ø£Ù…Ø§Ù†
BCRYPT_ROUNDS=12
JWT_SECRET=very-long-random-secret-key
WEBHOOK_SECRET=another-very-secure-secret
```

## ğŸ“Š Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª

### Health Checks

```bash
# ÙØ­Øµ ØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
curl http://localhost:3000/health

# ÙØ­Øµ ØµØ­Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
curl http://localhost:3000/health/database

# Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
curl -H "Authorization: Bearer TOKEN" \
  http://localhost:3000/api/v1/analytics/overview
```

### Logs

```bash
# Ø¹Ø±Ø¶ logs Ù…Ø¨Ø§Ø´Ø±
npm run logs

# logs Gateway API ÙÙ‚Ø·
docker-compose logs -f gateway_api

# logs Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
docker-compose logs -f
```

## ğŸš€ Ø§Ù„Ù†Ø´Ø±

### Ù†Ø´Ø± Ø¹Ù„Ù‰ Docker

```bash
# Ø¨Ù†Ø§Ø¡ Ø§Ù„ØµÙˆØ±
docker-compose build

# ØªØ´ØºÙŠÙ„ ÙÙŠ production
NODE_ENV=production docker-compose up -d

# ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø¯Ù…Ø§Øª
docker-compose pull && docker-compose up -d
```

### Ù†Ø´Ø± Ø¹Ù„Ù‰ Kubernetes

```yaml
# k8s/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: whatsapp-saas-gateway
spec:
  replicas: 3
  selector:
    matchLabels:
      app: whatsapp-saas-gateway
  template:
    metadata:
      labels:
        app: whatsapp-saas-gateway
    spec:
      containers:
      - name: gateway-api
        image: whatsapp-saas-gateway:latest
        ports:
        - containerPort: 3000
        env:
        - name: NODE_ENV
          value: "production"
```

## ğŸ”§ Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©

### Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ¦Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±

```bash
# ØªØ«Ø¨ÙŠØª dependencies
cd gateway/api && npm install
cd ../session-auth && npm install

# ØªØ´ØºÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ØªØ·ÙˆÙŠØ±
npm run api:dev    # Gateway API
npm run session-auth:dev  # Session Auth Service
```

### ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

```bash
# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª API
npm test

# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„
npm run test:integration

# ØªØºØ·ÙŠØ© Ø§Ù„ÙƒÙˆØ¯
npm run test:coverage
```

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

### Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

- ğŸ“§ **Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ**: support@whatsapp-saas.com
- ğŸ’¬ **Discord**: [Ø±Ø§Ø¨Ø· Discord](https://discord.gg/whatsapp-saas)
- ğŸ“– **Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚**: [docs.whatsapp-saas.com](https://docs.whatsapp-saas.com)
- ğŸ› **Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª**: [GitHub Issues](https://github.com/SamerElhamdo/whatsapp-api/issues)

### Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©

Ù†Ø±Ø­Ø¨ Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø§Øª! 

1. Fork Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹
2. Ø¥Ù†Ø´Ø§Ø¡ branch Ø¬Ø¯ÙŠØ¯ (`git checkout -b feature/amazing-feature`)
3. Commit Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª (`git commit -m 'Add amazing feature'`)
4. Push Ù„Ù„Ø¨Ø±Ù†Ø´ (`git push origin feature/amazing-feature`)
5. ÙØªØ­ Pull Request

## ğŸ“„ Ø§Ù„ØªØ±Ø®ÙŠØµ

Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø±Ø®Øµ ØªØ­Øª [MIT License](LICENSE.md).

---

<div align="center">

**ğŸš€ Ù…ÙØ·ÙˆÙ‘Ø± Ø¨Ù€ â¤ï¸ Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ† Ø§Ù„Ø¹Ø±Ø¨**

[Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ](https://whatsapp-saas.com) â€¢ 
[Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚](https://docs.whatsapp-saas.com) â€¢ 
[Ø§Ù„Ù…Ø¬ØªÙ…Ø¹](https://discord.gg/whatsapp-saas)

</div>