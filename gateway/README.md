# ๐ WhatsApp API Gateway

ูุธุงู Gateway ูุชูุฒูุน ุงูุฃุญูุงู ุจูู ุนุฏุฉ instances ูู WhatsApp API.

## ๐ฏ ุงููุฏู

ูููุฑ Gateway ุทุจูุฉ ูุณุทู ูุชูุฒูุน ุงูุทูุจุงุช ุจูู ุนุฏุฉ ุฎูุงุฏู WhatsApp APIุ ููุง ูุญุณู ูู:
- **ุงูุฃุฏุงุก**: ุชูุฒูุน ุงูุฃุญูุงู ุจุงูุชุณุงูู
- **ุงูุชููุฑ**: ุงุณุชูุฑุงุฑูุฉ ุงูุฎุฏูุฉ ุญุชู ูู ุชุนุทู ุฃุญุฏ ุงูุฎูุงุฏู
- **ุงููุฑุงูุจุฉ**: ุชุชุจุน ุญุงูุฉ ุฌููุน instances

## ๐ฆ ุงูุชุซุจูุช ูุงูุชุดุบูู

```bash
# ุงูุงูุชูุงู ููุฌูุฏ Gateway
cd gateway

# ุชุซุจูุช ุงูุงุนุชูุงุฏุงุช
npm install

# ุชุดุบูู Gateway
npm start

# ุฃู ููุชุทููุฑ ูุน ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุชููุงุฆู
npm run dev
```

## โ๏ธ ุงูุฅุนุฏุงุฏ

ุนุฏูู ููู `.env`:

```env
# ุจูุฑุช Gateway
PORT=3000

# ูุงุฆูุฉ instances (ููุตููุฉ ุจูุงุตูุฉ)
INSTANCES=http://localhost:3001,http://localhost:3002,http://localhost:3003

# ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ
HEALTH_CHECK_INTERVAL=30000  # ูุญุต ุงูุตุญุฉ ูู 30 ุซุงููุฉ
REQUEST_TIMEOUT=10000        # ูููุฉ ุงูุทูุจุงุช 10 ุซูุงูู
```

## ๐ API Endpoints

### `GET /status`
ุนุฑุถ ุญุงูุฉ Gateway ูุฌููุน instances:

```json
{
  "gateway": {
    "status": "running",
    "port": 3000,
    "uptime": 1234.56
  },
  "instances": {
    "total": 3,
    "healthy": 2,
    "unhealthy": 1,
    "details": { ... }
  }
}
```

### `POST /send-message`
ุฅุฑุณุงู ุฑุณุงูุฉ ุนุจุฑ ุฃุญุฏ instances:

```bash
curl -X POST http://localhost:3000/send-message \
  -H "Content-Type: application/json" \
  -d '{
    "chatId": "1234567890@c.us",
    "message": "ูุฑุญุจุง ูู Gateway!"
  }'
```

### `GET /health`
ูุญุต ุณุฑูุน ูุตุญุฉ Gateway:

```json
{
  "status": "healthy",
  "instances": {
    "total": 3,
    "healthy": 2
  }
}
```

## ๐ ุขููุฉ ุงูุชูุฒูุน

ูุณุชุฎุฏู Gateway ุฎูุงุฑุฒููุฉ **Round Robin** ูุชูุฒูุน ุงูุทูุจุงุช:

1. ูุฎุชุงุฑ instance ุงูุชุงูู ูู ุงููุงุฆูุฉ
2. ุฅุฐุง ูุงู ุบูุฑ ูุชุงุญุ ูุชุฎุทุงู ููุชุงูู
3. ูุฑุณู ุงูุทูุจ ููุนูุฏ ุงููุชูุฌุฉ
4. ูุฑุงูุจ ุงุณุชุฌุงุจุฉ instances ููุญุฏุซ ุญุงูุชูุง

## ๐ฅ ูุฑุงูุจุฉ ุงูุตุญุฉ

- ูุญุต ุฏูุฑู ูู 30 ุซุงููุฉ ุงูุชุฑุงุถูุงู
- ุชุณุฌูู ุฒูู ุงูุงุณุชุฌุงุจุฉ ููู instance
- ุชุนููู instances ุงููุชุนุทูุฉ ูุชุฌูุจูุง
- ุฅุนุงุฏุฉ ูุญุต instances ุงููุชุนุทูุฉ ุชููุงุฆูุงู

## ๐๏ธ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### Instance ุบูุฑ ูุชุงุญ
```
โ http://localhost:3001 - ุบูุฑ ูุชุงุญ: connect ECONNREFUSED
```
**ุงูุญู**: ุชุฃูุฏ ูู ุชุดุบูู WhatsApp API ุนูู ุงูุจูุฑุช ุงููุญุฏุฏ.

### ูุง ุชูุฌุฏ instances ูุชุงุญุฉ
```json
{
  "success": false,
  "error": "ูุง ุชูุฌุฏ instances ูุชุงุญุฉ"
}
```
**ุงูุญู**: ุชุญูู ูู ูุชุบูุฑ `INSTANCES` ูู `.env`.

## ๐ ุงููุซุงู ุงูุนููู

```bash
# ุชุดุบูู 3 instances ูู WhatsApp API
npm start --port=3001 &  # Instance 1
npm start --port=3002 &  # Instance 2  
npm start --port=3003 &  # Instance 3

# ุชุดุบูู Gateway
cd gateway
npm start
```

ุงูุขู Gateway ุณููุฒุน ุงูุทูุจุงุช ุจูู ุงูู 3 instances ุชููุงุฆูุงู! ๐